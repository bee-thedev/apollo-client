{"ast":null,"code":"import { WebSocketLink } from '@apollo/client/link/ws';\nimport { onError } from '@apollo/client/link/error'; // import { getMainDefinition } from '@apollo/client/utilities';\n\nimport { ApolloClient, InMemoryCache, ApolloProvider, HttpLink, from, split } from \"@apollo/client\"; // use for Pub/Sub (Subscription)\n\nconst wsLink = new WebSocketLink({\n  uri: process.env.REACT_APP_GRAPHQL_WS_URI,\n  options: {\n    reconnect: true // connectionParams: {\n    //     authToken: '<authToken>',\n    // }\n\n  }\n});\nconst httpLink = new HttpLink({\n  uri: process.env.REACT_APP_GRAPHQL_URI\n}); // https://www.apollographql.com/docs/react/data/error-handling/\n\nconst errorLink = onError(({\n  graphqlErrors,\n  networkErrors\n}) => {\n  if (graphqlErrors) {\n    graphqlErrors.map(({\n      message,\n      location,\n      path\n    }) => {\n      alert('GraphQL Error: ' + message);\n    });\n  } // To retry on network errors, we recommend the RetryLink\n  // instead of the onError link. This just logs the error.\n\n\n  if (networkErrors) {\n    console.log(`[Network error]: ${networkErrors}`);\n  }\n}); // The split function takes three parameters: (https://www.apollographql.com/docs/react/data/subscriptions/)\n// * A function that's called for each operation to execute\n// * The Link to use for an operation if the function returns a \"truthy\" value\n// * The Link to use for an operation if the function returns a \"falsy\" value\n// const splitLink = split(\n//     ({ query }) => {\n//         const definition = getMainDefinition(query);\n//         return (\n//             definition.kind === 'OperationDefinition' &&\n//             definition.operation === 'subscription'\n//         );\n//     },\n//     wsLink,\n//     httpLink,\n// );\n// const client = new ApolloClient({\n//     cache: new InMemoryCache(),\n//     link: from([errorLink, splitLink])\n// })\n\nconst client = new ApolloClient({\n  uri: 'https://48p1r2roz4.sse.codesandbox.io',\n  cache: new InMemoryCache()\n});\nexport { ApolloProvider, client };","map":{"version":3,"sources":["/home/beenysh/myprojects/reactapps/apollo-client/src/GraphQL/apolloSetup.js"],"names":["WebSocketLink","onError","ApolloClient","InMemoryCache","ApolloProvider","HttpLink","from","split","wsLink","uri","process","env","REACT_APP_GRAPHQL_WS_URI","options","reconnect","httpLink","REACT_APP_GRAPHQL_URI","errorLink","graphqlErrors","networkErrors","map","message","location","path","alert","console","log","client","cache"],"mappings":"AAAA,SAASA,aAAT,QAA8B,wBAA9B;AACA,SAASC,OAAT,QAAwB,2BAAxB,C,CACA;;AACA,SACIC,YADJ,EAEIC,aAFJ,EAGIC,cAHJ,EAIIC,QAJJ,EAKIC,IALJ,EAMIC,KANJ,QAOO,gBAPP,C,CAUA;;AACA,MAAMC,MAAM,GAAG,IAAIR,aAAJ,CAAkB;AAC7BS,EAAAA,GAAG,EAAEC,OAAO,CAACC,GAAR,CAAYC,wBADY;AAE7BC,EAAAA,OAAO,EAAE;AACLC,IAAAA,SAAS,EAAE,IADN,CAEL;AACA;AACA;;AAJK;AAFoB,CAAlB,CAAf;AAUA,MAAMC,QAAQ,GAAG,IAAIV,QAAJ,CAAa;AAC1BI,EAAAA,GAAG,EAAEC,OAAO,CAACC,GAAR,CAAYK;AADS,CAAb,CAAjB,C,CAIA;;AACA,MAAMC,SAAS,GAAGhB,OAAO,CAAC,CAAC;AAAEiB,EAAAA,aAAF;AAAiBC,EAAAA;AAAjB,CAAD,KAAsC;AAC5D,MAAID,aAAJ,EAAmB;AACfA,IAAAA,aAAa,CAACE,GAAd,CAAkB,CAAC;AAAEC,MAAAA,OAAF;AAAWC,MAAAA,QAAX;AAAqBC,MAAAA;AAArB,KAAD,KAAiC;AAC/CC,MAAAA,KAAK,CAAC,oBAAoBH,OAArB,CAAL;AACH,KAFD;AAGH,GAL2D,CAO5D;AACA;;;AACA,MAAIF,aAAJ,EAAmB;AACfM,IAAAA,OAAO,CAACC,GAAR,CAAa,oBAAmBP,aAAc,EAA9C;AACH;AACJ,CAZwB,CAAzB,C,CAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;AAEA,MAAMQ,MAAM,GAAG,IAAIzB,YAAJ,CAAiB;AAC5BO,EAAAA,GAAG,EAAE,uCADuB;AAE5BmB,EAAAA,KAAK,EAAE,IAAIzB,aAAJ;AAFqB,CAAjB,CAAf;AAKA,SACIC,cADJ,EAEIuB,MAFJ","sourcesContent":["import { WebSocketLink } from '@apollo/client/link/ws';\nimport { onError } from '@apollo/client/link/error'\n// import { getMainDefinition } from '@apollo/client/utilities';\nimport {\n    ApolloClient,\n    InMemoryCache,\n    ApolloProvider,\n    HttpLink,\n    from,\n    split\n} from \"@apollo/client\"\n\n\n// use for Pub/Sub (Subscription)\nconst wsLink = new WebSocketLink({\n    uri: process.env.REACT_APP_GRAPHQL_WS_URI,\n    options: {\n        reconnect: true,\n        // connectionParams: {\n        //     authToken: '<authToken>',\n        // }\n    }\n});\n\nconst httpLink = new HttpLink({\n    uri: process.env.REACT_APP_GRAPHQL_URI\n});\n\n// https://www.apollographql.com/docs/react/data/error-handling/\nconst errorLink = onError(({ graphqlErrors, networkErrors }) => {\n    if (graphqlErrors) {\n        graphqlErrors.map(({ message, location, path }) => {\n            alert('GraphQL Error: ' + message);\n        });\n    }\n    \n    // To retry on network errors, we recommend the RetryLink\n    // instead of the onError link. This just logs the error.\n    if (networkErrors) {\n        console.log(`[Network error]: ${networkErrors}`);\n    }\n})\n\n// The split function takes three parameters: (https://www.apollographql.com/docs/react/data/subscriptions/)\n// * A function that's called for each operation to execute\n// * The Link to use for an operation if the function returns a \"truthy\" value\n// * The Link to use for an operation if the function returns a \"falsy\" value\n// const splitLink = split(\n//     ({ query }) => {\n//         const definition = getMainDefinition(query);\n//         return (\n//             definition.kind === 'OperationDefinition' &&\n//             definition.operation === 'subscription'\n//         );\n//     },\n//     wsLink,\n//     httpLink,\n// );\n\n// const client = new ApolloClient({\n//     cache: new InMemoryCache(),\n//     link: from([errorLink, splitLink])\n// })\n\nconst client = new ApolloClient({\n    uri: 'https://48p1r2roz4.sse.codesandbox.io',\n    cache: new InMemoryCache()\n  });\n\nexport {\n    ApolloProvider,\n    client\n}"]},"metadata":{},"sourceType":"module"}